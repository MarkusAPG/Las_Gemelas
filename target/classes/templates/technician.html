<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Panel TÃ©cnico - Las Gemelas</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <header>
        <h1>âš™ï¸ Panel TÃ©cnico</h1>
        <nav>
            <a th:href="@{/}">ğŸª Ver Tienda</a>
            <a th:href="@{/logout}">ğŸšª Salir</a>
        </nav>
    </header>

    <div class="container">

        <!-- GestiÃ³n de Productos -->
        <section style="margin-bottom: 3rem;">
            <h2>ğŸ“¦ GestiÃ³n de Productos</h2>

            <div>
                <h3>â• Agregar Nuevo Producto</h3>
                <form th:action="@{/tecnico/producto/guardar}" th:object="${nuevoProducto}" method="post" id="productForm"
                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <input type="text" th:field="*{nombre}" placeholder="ğŸ“ Nombre del producto" class="form-control" required>
                    <input type="text" th:field="*{categoria}" placeholder="ğŸ·ï¸ CategorÃ­a" class="form-control">
                    <select th:field="*{tipo}" class="form-control">
                        <option value="ambos">ğŸ”„ Ambos (Venta y Alquiler)</option>
                        <option value="venta">ğŸ’° Solo Venta</option>
                        <option value="alquiler">ğŸ“… Solo Alquiler</option>
                    </select>
                    <input type="number" step="0.01" th:field="*{precioVenta}" placeholder="ğŸ’µ Precio Venta (S/)" 
                        class="form-control" min="0">
                    <input type="number" step="0.01" th:field="*{precioAlquiler}" placeholder="ğŸ“… Precio Alquiler (S/)" 
                        class="form-control" min="0">
                    <input type="number" th:field="*{stock}" placeholder="ğŸ“Š Stock disponible" 
                        class="form-control" min="0">
                    <input type="text" th:field="*{imagen}" placeholder="ğŸ–¼ï¸ Nombre Imagen (ej: foto.jpg)" 
                        class="form-control">
                    <textarea th:field="*{descripcion}" placeholder="ğŸ“„ DescripciÃ³n del producto" 
                        class="form-control" style="grid-column: span 2; min-height: 100px;"></textarea>

                    <button type="submit" class="btn btn-primary" style="grid-column: span 2; margin-top: 0.5rem;">
                        ğŸ’¾ Guardar Producto
                    </button>
                </form>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>ğŸ“¦ Nombre</th>
                        <th>ğŸ“Š Stock</th>
                        <th>âœ… Estado</th>
                        <th>âš™ï¸ Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="prod, iterStat : ${productos}">
                        <td th:text="${prod.id}">1</td>
                        <td style="font-weight: 600;" th:text="${prod.nombre}">Producto</td>
                        <td>
                            <span style="padding: 0.3rem 0.8rem; border-radius: 20px; font-weight: 600; font-size: 0.85rem;"
                                  th:style="${prod.stock > 10 ? 'background: var(--success-bg); color: var(--success-color);' : 
                                            (prod.stock > 0 ? 'background: #FEF3C7; color: #D97706;' : 
                                            'background: var(--error-bg); color: var(--error-color);')}"
                                  th:text="${prod.stock}">10</span>
                        </td>
                        <td>
                            <span style="padding: 0.3rem 0.8rem; border-radius: 20px; font-weight: 600; font-size: 0.85rem;"
                                  th:style="${prod.estado == 'disponible' ? 'background: var(--success-bg); color: var(--success-color);' : 
                                            'background: var(--error-bg); color: var(--error-color);'}"
                                  th:text="${prod.estado}">Disponible</span>
                        </td>
                        <td>
                            <a th:href="@{/tecnico/producto/eliminar/{id}(id=${prod.id})}" 
                               class="btn btn-danger"
                               style="padding: 0.4rem 0.8rem; font-size: 0.85rem;"
                               onclick="return confirm('Â¿EstÃ¡s seguro de eliminar este producto?');">
                                ğŸ—‘ï¸ Eliminar
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- GestiÃ³n de Usuarios -->
        <section>
            <h2>ğŸ‘¥ GestiÃ³n de Usuarios</h2>
            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>ğŸ‘¤ Nombre</th>
                        <th>ğŸ“§ Correo</th>
                        <th>ğŸ­ Rol</th>
                        <th>âš™ï¸ Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="user, iterStat : ${usuarios}">
                        <td th:text="${user.id}">1</td>
                        <td style="font-weight: 600;" th:text="${user.nombre + ' ' + user.apellido}">Juan Perez</td>
                        <td th:text="${user.correo}">juan@mail.com</td>
                        <td>
                            <span style="padding: 0.3rem 0.8rem; border-radius: 20px; font-weight: 600; font-size: 0.85rem; background: var(--light-purple); color: var(--dark-purple);"
                                  th:text="${user.rol}">cliente</span>
                        </td>
                        <td>
                            <a th:href="@{/tecnico/usuario/eliminar/{id}(id=${user.id})}" 
                               class="btn btn-danger"
                               style="padding: 0.4rem 0.8rem; font-size: 0.85rem;"
                               onclick="return confirm('Â¿EstÃ¡s seguro de eliminar este usuario?');">
                                ğŸ—‘ï¸ Eliminar
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('productForm');
            const inputs = form.querySelectorAll('input, select, textarea');
            
            // Add focus animations
            inputs.forEach(input => {
                input.addEventListener('focus', function() {
                    this.style.transform = 'scale(1.02)';
                    this.style.transition = 'transform 0.3s ease';
                });
                
                input.addEventListener('blur', function() {
                    this.style.transform = 'scale(1)';
                });
            });

            // Form submission animation
            form.addEventListener('submit', function(e) {
                const button = form.querySelector('button[type="submit"]');
                button.innerHTML = 'â³ Guardando...';
                button.style.opacity = '0.7';
                button.disabled = true;
            });

            // Add hover effects to table rows
            const tableRows = document.querySelectorAll('tbody tr');
            tableRows.forEach(row => {
                row.addEventListener('mouseenter', function() {
                    this.style.transition = 'all 0.3s ease';
                });
            });
        });
    </script>
</body>

</html>